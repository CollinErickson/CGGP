---
title: "An Introduction to the CGGP package"
author: "Collin Erickson"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{CGGP}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(CGGP)
```

## Introduction

The R package `CGGP` implements the adaptive composite grid using
Gaussian process models presented in a forthcoming publication by
Matthew Plumlee, Collin Erickson, Bruce Ankenman, et al.
It provides an algorithm for running sequential computer experiments
with thousands of data points.

The composite grid structure imposes strict requirements on which points
should be evaluated.
The inputs chosen to be evaluated are specified by the algorithm.
This does not work with preexisting data sets,
it is not a regression technique.
This only works in sequential experimental design scenarios:
you start with no data, and then decide which points to evaluate
in batches according to the algorithm.


When to use it:

* You have not started collecting data yet, or only have a small data set

* You will collect 5,000 to 100,000 data points

* You will collect data iteratively

* Your simulation has four to twenty input dimensions

* The simulation output is deterministic (evaluating the same input twice
always returns the same value)


Why you should use it:

* Gaussian process models, a common model choice for modeling
computer experiments, have computation issues for more than
a thousand data points

* Accuracy is much better than popular machine learning algorithms,
which are better suited for noisy data




## How to use `CGGP`

You should have a deterministic function that takes $d$-dimensional input
that you can evaluate for any point in the unit cube $[0,1]^d$.
The points generated by the algorithm will be given to you to evaluate,
then you will return the function output for each input point.
The model will be fit to this data and you will be able to use it
to make predictions or evaluate additional points.

To begin, use `CGGPcreate` to create a `CGGP` object.
You must tell it the number of input dimensions $d$
and the number of points for the first batch.
For example, if $d=10$ and you want to begin will 100 points,
you can create a model `mod` with the following code.

```{r cggpcreate}
library(CGGP)
# Create the initial design
mod <- CGGPcreate(d=10, batchsize=100)
print(mod)
```

Now `mod` will contain all the relevant information for the composite
grid design and model.
Most importantly, it has the initial set of points
that must be evaluated.
These are accessed as `mod$design`.

```{r}
mod$design
```

Now you must pass these points to your function to be evaluated.

Once you have the data for each row of `mod$design`,
you can now fit the model using `CGGPfit`.

```{r cggpfit}
mod <- CGGPfit(mod, Y)
print(mod)
```


